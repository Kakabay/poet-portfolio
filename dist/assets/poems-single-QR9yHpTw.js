const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DUSLFOFJ.js","assets/index-BzDeHnS9.css"])))=>i.map(i=>d[i]);
import{j as e,L as G,c as x,p as o,e as T,f as q,r as y,d as F,S as I,_ as O,T as U}from"./index-DUSLFOFJ.js";import{S as v}from"./section-line-BDtjra6J.js";import{u as Q}from"./use-get-pin-poems-Dk2tk-Xp.js";import{u as V}from"./use-get-poems-O2sswUBB.js";import{u as D}from"./useQuery-B-FtTTmS.js";const S=({name:t,disable:i=!1,link:a="",prev:l=!1})=>e.jsx(G,{to:a,children:e.jsxs("button",{disabled:i,className:x("flex flex-col disabled:opacity-50 disabled:cursor-default md:gap-2 gap-1 cursor-pointer",l?"text-right items-end":"text-left"),children:[e.jsx("span",{className:"text-PRIM leading-[130%] md:leading-[140%] font-normal -tracking-wider md:font-medium text-[12px] md:text-[14px]",children:l?"Predyduşeýe proizwedeniýe":"Sleduşeýe proizwedeniýe"}),e.jsx("img",{src:"/images/poems/poem-arrow.svg",className:x(!l&&"-rotate-[180deg]")}),e.jsxs("div",{className:"flex flex-col md:gap-2",children:[e.jsx("h4",{className:"kaushan text-[16px] leading-none md:text-[24px] md:leading-[115%]",children:t}),e.jsxs("div",{className:x("flex items-center gap-2",l&&"justify-end"),children:[e.jsx("img",{src:"/images/star.svg",className:"md:size-6 size-4"}),e.jsx("h5",{className:"md:text-[14px] text-[12px] fon-medium italic",children:"(Aýdym üçin)"})]})]})]})}),J=t=>{const{data:i,isLoading:a,isError:l,isSuccess:p}=D({queryKey:["poemsSingle",t],queryFn:()=>o.getPoemsSingle(t),select:({data:m})=>m});return{data:i,isLoading:a,isError:l,isSuccess:p}},M=[{text:`Giň eýwanyň diwaryndan asylan, 
    Gabat garşysynda eýwan gapylaň. 
    Iler göze, hol ýokarda dakylan, 
    Kakamyň sagady, 
    Ýaňly sagady.`},{text:`Ulyň-kiçiň gözi mydam ondady, 
    “Jyk, jyk” sesi gulagmyzda, aňdady. 
    Wagty “aýdýan” ol ajaýyp jaňdady, 
    Kakamyň sagady, 
    Jaňly sagady.`},{text:`Biziň kalba hemişelik dolupdy, 
    Ýol görkezýän ýol beledi bolupdy. 
    Sadalygy ýüreklere salypdy, 
    Kakamyň sagady, 
    Zaňly sagady.`},{text:`Dolansadym ýene şol ajap döwre, 
    Many paýlan, mazmun beren bu ömre.
    Ajaýyp arzuwlar gelsin bu köňle, 
    Kakamyň sagady, 
    Şanly sagatdy`}],X=()=>{var h,N,b,P,_,k,w;const{id:t}=T(),i=Number(t),{data:a}=V(),{data:l,isLoading:p}=J(Number(t||1)),m=l||[],f=q(s=>s.setPath),{data:r}=Q(),[z,g]=y.useState(!1),E=F(),u=async(s,n)=>{try{n?await o.unPinPoem({poem_id:s}):await o.postPoem({poem_id:s}),E.invalidateQueries({queryKey:["pinPoems"]})}catch(d){console.log(d)}finally{g(!1)}};y.useEffect(()=>(f("poem"),()=>f("")),[]);const j=(a==null?void 0:a.findIndex(s=>s.id===i))||i-1,A=(h=a==null?void 0:a[j-1])==null?void 0:h.poem_name,L=(N=a==null?void 0:a[j+1])==null?void 0:N.poem_name,[c,K]=y.useState((r==null?void 0:r.pinned_poems.some(s=>s.id===i))||!1),R=async()=>{try{g(!0);const{toast:s}=await O(async()=>{const{toast:d}=await import("./index-DUSLFOFJ.js").then(C=>C.a0);return{toast:d}},__vite__mapDeps([0,1])),n=r==null?void 0:r.pinned_poems.some(d=>d.id===i);s({title:c?"Стих удален из избранного":"Стих добавлен в избранное",action:e.jsx(U,{onClick:async()=>{try{n?await o.postPoem({poem_id:Number(t)}):await o.unPinPoem({poem_id:Number(t)})}catch(d){console.log(d)}},altText:"Отменить",children:"Отменить"}),duration:3e3}),c?await o.unPinPoem({poem_id:Number(t)}):await o.postPoem({poem_id:Number(t)}),K(!c),u==null||u(Number(t),!c)}catch(s){console.log(s)}finally{g(!1)}};return e.jsx("main",{className:x("pt-8 xl:pt-12 pb-16 xl:pb-[120px] relative z-30"),children:e.jsx("div",{className:"container",children:p?e.jsx(I,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-center items-start gap-4",children:[e.jsx("h1",{className:"h1 kaushan text-center xl:mb-12 mb-6",children:(b=m[0])==null?void 0:b.poem_name}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{disabled:z,onClick:R,className:"disabled:opacity-50",children:e.jsx("img",{className:"cursor-pointer p-1",src:c?"/images/star-fill.svg":"/images/star.svg"})}),e.jsx("img",{src:"/images/play.svg"})]})]}),e.jsxs("div",{className:x("flex flex-col xl:gap-12 gap-8"),children:[e.jsx("section",{className:"container",children:e.jsx("div",{className:"flex flex-col gap-4 xl:gap-12 md:gap-6 text-[16px] xl:text-[20px] leading-[140%] text-ON_SURFACE_VAR",children:(P=m[0])==null?void 0:P.couplets_poem.map(({textarea1:s},n)=>e.jsx("p",{className:"md:flex-[0_1_50%]",children:s},n))})}),e.jsx(v,{}),e.jsxs("section",{className:"",children:[e.jsxs("div",{className:"flex flex-col text-16 gap-4 xl:gap-6 xl:w-[400px] md:w-[372px] !font-normal mx-auto xl:text-[20px]",children:[M.map(({text:s},n)=>e.jsx("p",{children:s},n)),e.jsx("div",{className:"flex justify-end",children:e.jsx("h4",{className:"text-right xl:w-[140px] text-[14px] leading-[140%] text-ON_SURFACE_VAR xl:font-medium",children:(_=m[0])==null?void 0:_.place_poem})})]}),e.jsx("div",{className:"container flex justify-center xl:mt-16 mt-8",children:e.jsxs("div",{className:"border pt-4 px-4 border-OUTLINE w-fit rounded-[4px]",children:[e.jsx("h5",{className:"text-16 font-semibold",children:"Kakamyň sagady"}),e.jsx("audio",{id:"player",controls:!0,src:"/images/sound.mp3",className:"bg-transparent"})]})}),e.jsx(v,{className:"xl:mt-16 xl:mb-12 my-8"}),e.jsxs("div",{className:"flex gap-4 md:gap-8 xl:gap-0 items-center xl:justify-between",children:[e.jsx(S,{link:`/poems/${i-1}`,disable:i===1,prev:!0,name:A||((k=a==null?void 0:a[0])==null?void 0:k.poem_name)||""}),e.jsx(S,{link:`/poems/${i+1}`,disable:i===(a==null?void 0:a.length),name:L||((w=a==null?void 0:a[5])==null?void 0:w.poem_name)||""})]})]})]})]})})})};export{X as default};
