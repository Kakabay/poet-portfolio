const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DHVO_Rqi.js","assets/index-BzDeHnS9.css"])))=>i.map(i=>d[i]);
import{q as P,r as p,j as s,m as _,B as b,L as N,_ as y,T as v,p as m}from"./index-DHVO_Rqi.js";import{u as k}from"./use-get-pin-poems-BcB83_gJ.js";const A=({id:e,poem_name:d,active:x=!1,onFavoriteChange:a,link:u})=>{const g=P().accessToken,[t,r]=p.useState(x),[f,n]=p.useState(!1),{data:l}=k(),h=(l==null?void 0:l.pinned_poems)||[];console.log(h);const j=async()=>{try{n(!0);const{toast:i}=await y(async()=>{const{toast:c}=await import("./index-DHVO_Rqi.js").then(w=>w.a0);return{toast:c}},__vite__mapDeps([0,1])),o=t;i({title:t?"Стих удален из избранного":"Стих добавлен в избранное",action:s.jsx(v,{onClick:async()=>{try{o?await m.postPoem({poem_id:e}):await m.unPinPoem({poem_id:e}),r(o),a==null||a(e,o)}catch(c){console.log(c)}},altText:"Отменить",children:"Отменить"}),duration:3e3}),t?await m.unPinPoem({poem_id:e}):await m.postPoem({poem_id:e}),r(!t),a==null||a(e,!t)}catch(i){console.log(i)}finally{n(!1)}};return s.jsxs(_.div,{className:"xl:w-[458px] md:w-[372px] xl:h-[134px] h-[118px] w-[328px] p-4 xl:p-6 relative shadow-bottom cursor-pointer",children:[s.jsx(b,{className:"xl:bg-[url('/images/poems/poem-shape.svg')] md:bg-[url('/images/poems/poem-med-shape.svg')] bg-[url('/images/poems/poem-mob-shape.svg')] poem-mob-path md:poems-med-path xl:poem-path"}),s.jsx(N,{to:u,className:"leading-[120%] flex items-start mb-2 h-[58px] overflow-hidden",children:s.jsxs("div",{className:"flex items-center w-full",children:[s.jsx("img",{src:"/images/romb.svg",className:"mr-1"}),s.jsxs("div",{className:"flex justify-between w-full",children:[s.jsx("h4",{className:"kaushan mr-3",children:d}),s.jsx("img",{src:"/images/play.svg",alt:"play"})]})]})}),s.jsxs("div",{className:"leading-[115%] h-5 flex items-center gap-2",children:[g&&s.jsx("button",{disabled:f,onClick:j,className:"w-5 disabled:opacity-50",children:s.jsx("img",{src:t?"/images/star-fill.svg":"/images/star.svg",className:"mr-1 size-5"})}),s.jsx("img",{src:"/images/poems/new.svg",alt:"",className:"mr-1"}),s.jsx("span",{className:"font-medium italic text-[14px]",children:"(Aýdym üçin)"})]})]})};export{A as P};
